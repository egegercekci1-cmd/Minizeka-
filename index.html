<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Ortak Beyin AI</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body {
  background:#111;
  color:white;
  font-family:Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  margin:0;
}
#box {
  width:90%;
  max-width:400px;
  background:#222;
  padding:15px;
  border-radius:10px;
}
#chat {
  height:300px;
  overflow-y:auto;
  border:1px solid #333;
  padding:10px;
  margin-bottom:10px;
}
input,button {
  width:100%;
  padding:10px;
  margin-top:5px;
  border-radius:5px;
  border:none;
}
button {
  background:#00bcd4;
  font-weight:bold;
}
</style>
</head>
<body>

<div id="box">
  <h2>ü§ñ Ortak Beyin AI</h2>
  <div id="chat"></div>
  <input id="input" placeholder="Bir ≈üey yaz...">
  <button onclick="send()">G√∂nder</button>
</div>

<script>
// üî• FIREBASE AYARLARI (BURAYI DOLDUR)
const firebaseConfig = {
  apiKey: "API_KEY",
  authDomain: "DOMAIN",
  projectId: "PROJECT_ID"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const bannedWords = ["k√ºf√ºr", "salak", "aptal", "mal"];
let waitingTeach = null;

function badWord(text){
  return bannedWords.some(w => text.includes(w));
}

function addMsg(text, who="ai"){
  const d = document.createElement("div");
  d.innerText = (who==="user"?"üßë ":"ü§ñ ") + text;
  chat.appendChild(d);
  chat.scrollTop = chat.scrollHeight;
}

async function send(){
  const input = document.getElementById("input");
  const text = input.value.trim().toLowerCase();
  if(!text) return;
  input.value="";

  addMsg(text,"user");

  if(waitingTeach){
    if(badWord(text)){
      addMsg("Bu cevap uygun deƒüil ‚ùå");
      waitingTeach=null;
      return;
    }

    await db.collection("pending").doc(waitingTeach).set({
      answer:text,
      time:Date.now()
    });

    addMsg("Cevap admin onayƒ±na g√∂nderildi ‚è≥");
    waitingTeach=null;
    return;
  }

  const doc = await db.collection("memory").doc(text).get();
  if(doc.exists && doc.data().approved){
    addMsg(doc.data().answer);
  }else{
    addMsg("Bunu bilmiyorum. Bana √∂ƒüretir misin?");
    waitingTeach=text;
  }
}
</script>

</body>
</html>